{% extends 'mainapp/base.html' %}
{% load static %}
{% block title %}Weekly Leaderboards{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/leaderboards.css' %}">
    <style>
        /* leaderboards.css */
        .leaderboard-container {
            max-width: 95%;
            margin: 20px auto;
            background-color: #f4f4f4;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            color: #333;
            font-family: 'Arial', sans-serif;
        }

        .leaderboard-container h2 {
            text-align: center;
            color: #2c6e49;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .leaderboard-list {
            list-style-type: none;
            padding: 0;
        }

        .leaderboard-entry {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #fff;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .leaderboard-entry:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border-color: #2c6e49;
        }

        .profile-info {
            display: flex;
            align-items: center;
        }

        .profile-info .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
            border: 2px solid #2c6e49;
        }

        .rank-counter {
            font-weight: bold;
            color: #2c6e49;
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .leaderboard-entry span {
            flex-grow: 1;
            text-align: center;
            color: #555;
        }

        .leaderboard-entry span:first-of-type {
            text-align: left;
            font-weight: bold;
            color: #2c6e49;
        }

        .leaderboard-entry span:last-of-type {
            text-align: right;
            font-weight: bold;
            color: #d9534f;
        }

        /* Media query for responsiveness */
        @media (max-width: 600px) {
            .leaderboard-entry {
                flex-direction: column;
                align-items: flex-start;
            }

            .leaderboard-entry span {
                text-align: left;
                width: 100%;
                margin-top: 5px;
            }

            .leaderboard-entry span:first-of-type {
                margin-top: 0;
            }

            .profile-info {
                margin-bottom: 10px;
            }
        }
    </style>
{% endblock %}

{% block content %}
    <div class="leaderboard-container">
        <h2>Weekly Leaderboard - From {{ start_of_week|date:"F j, Y" }} to {{ end_of_week|date:"F j, Y" }}</h2> <!-- Show the current date -->
        {% if leaderboard %}
            <ul class="leaderboard-list">
                {% for entry in leaderboard %}
                    <li class="leaderboard-entry">
                        <span class="rank-counter">{{ forloop.counter }}.</span> <!-- Display the rank counter -->
                        <div class="profile-info">
                            <!-- Display the avatar based on the value in entry.avatar -->
                            {% if entry.avatar == '1' %}
                                <img src="{% static 'avatar/kid.jpg' %}" alt="Avatar 1" class="avatar">
                            {% elif entry.avatar == '2' %}
                                <img src="{% static 'avatar/men.jpg' %}" alt="Avatar 2" class="avatar">
                            {% elif entry.avatar == '3' %}
                                <img src="{% static 'avatar/girl1.jpg' %}" alt="Avatar 3" class="avatar">
                            {% elif entry.avatar == '4' %}
                                <img src="{% static 'avatar/girl2.jpg' %}" alt="Avatar 4" class="avatar">
                            {% elif entry.avatar == '5' %}
                                <img src="{% static 'avatar/girl3.jpg' %}" alt="Avatar 5" class="avatar">
                            {% elif entry.avatar == '6' %}
                                <img src="{% static 'avatar/girl4.jpg' %}" alt="Avatar 6" class="avatar">
                            {% elif entry.avatar == '7' %}
                                <img src="{% static 'avatar/boy1.jpg' %}" alt="Avatar 7" class="avatar">
                            {% elif entry.avatar == '8' %}
                                <img src="{% static 'avatar/boy2.jpg' %}" alt="Avatar 8" class="avatar">
                            {% elif entry.avatar == '9' %}
                                <img src="{% static 'avatar/ninja.jpg' %}" alt="Avatar 9" class="avatar">
                            {% else %}
                                <img src="{% static 'avatar/default.jpg' %}" alt="Default Avatar" class="avatar">
                            {% endif %}
                        </div>
                        <span>{{ entry.user__username }}</span>
                        <span>Total Distance: {{ entry.total_distance }}km</span>
                        <span>Total Carbon: {{ entry.total_carbon }}g</span>
                        <span>Ratio: {{ entry.efficiency }} g/km</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No data available for this week.</p>
        {% endif %}
    </div>
{% endblock %}
